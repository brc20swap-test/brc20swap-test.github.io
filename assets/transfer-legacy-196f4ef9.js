System.register(["./index-legacy-74108fc3.js","./feeRate-legacy-21217765.js","./index-legacy-eb367674.js"],(function(e,a){"use strict";var t,n,l,o,c,s,r,i,p,d,m,u,x,f,b,v,g,y,h,k,w,F,B,$,C,_,j,T,I,E,z,U,A,R,N,S,V,q,D,H,W,G,J,K;return{setters:[e=>{t=e.j,n=e.ag,l=e.af,o=e.aO,c=e.a,s=e.l,r=e.w,i=e.aX,p=e.ah,d=e.ai,m=e.C,u=e.aj,x=e.ak,f=e.al,b=e.b3,v=e.ay,g=e.aC,y=e.aI,h=e.an,k=e.aq,w=e.a8,F=e.ap,B=e.am,$=e.ao,C=e.ax,_=e.au,j=e.a4,T=e.a5,I=e.aw,E=e.as,z=e.aB,U=e.aF,A=e.ac,R=e.aH,N=e.aG,S=e.aJ,V=e.aK,q=e.aU,D=e.ae,H=e.aL},e=>{W=e.A,G=e.F},e=>{J=e.R,K=e.a}],execute:function(){var a=document.createElement("style");a.textContent=".page-container[data-v-0a9a3acc]{--van-nav-bar-background-color: #fff;--van-nav-bar-arrow-size: .53333rem;--van-nav-bar-title-text-color: #333333;--van-nav-bar-icon-color: #999;background:#F8F8F8}.page-container .page-content[data-v-0a9a3acc]{background:#fff;padding:.26667rem .42667rem}.page-container .page-content .tabs[data-v-0a9a3acc]{background:#F5F6F7;border-radius:.10667rem;display:flex;padding:.08rem}.page-container .page-content .tabs .tab-item[data-v-0a9a3acc]{flex:1;background:transparent;border-radius:.10667rem;padding:.21333rem 0;font-size:.37333rem;color:#999;text-align:center}.page-container .page-content .tabs .tab-item.active[data-v-0a9a3acc]{background:#FFFFFF;font-size:.37333rem;color:#333;font-weight:500}.page-container .page-content .input-box[data-v-0a9a3acc]{border:.02667rem solid #EBEBEB;border-radius:.10667rem}.page-container .page-content .input-box[data-v-0a9a3acc] .van-field__label{display:flex}.page-container .page-content .submit-btn[data-v-0a9a3acc]{height:1.06667rem;border-radius:.16rem;margin-top:1.33333rem}.page-container .page-content .btn-max[data-v-0a9a3acc]{font-size:.37333rem;color:#3f80f7;font-weight:400;border:none}.page-container .page-content .btn-max[data-v-0a9a3acc]:disabled{opacity:.5}.pop-content[data-v-0a9a3acc]{padding:0 .42667rem .8rem}.pop-content .fee-form[data-v-0a9a3acc]{display:flex;justify-content:space-between;align-items:stretch;font-size:.32rem;color:#999;letter-spacing:0;font-weight:400}.pop-content .fee-form .fee-item[data-v-0a9a3acc]{border:.02667rem solid #EBEBEB;border-radius:.10667rem;display:flex;flex-direction:column;align-items:center;width:calc(25vw - .4rem);padding:.26667rem 0}.pop-content .fee-form .fee-item.input-fee[data-v-0a9a3acc]{flex:none}.pop-content .fee-form .fee-item.input-fee[data-v-0a9a3acc] .van-field__value{display:flex;align-items:center}.pop-content .fee-form .fee-item.input-fee[data-v-0a9a3acc]:focus-within{border:.02667rem solid #558BED}.pop-content .fee-form .fee-item.active[data-v-0a9a3acc]{background:#F2F7FF;border:.02667rem solid #558BED}.pop-content .buy-btn[data-v-0a9a3acc]{height:1.06667rem;border-radius:.10667rem;margin-top:1.33333rem}.radio-group[data-v-0a9a3acc]{--van-radio-size: .37333rem}.radio-btn[data-v-0a9a3acc]{border:.02667rem solid #ddd;border-radius:.13333rem;width:calc(33% - .21333rem);padding:.26667rem 0 .13333rem;position:relative;margin:.10667rem}.radio-btn[data-v-0a9a3acc]:disabled{opacity:.5;background-color:#eee}.radio-btn .radio-icon[data-v-0a9a3acc]{position:absolute;right:.26667rem;top:.26667rem}.form-container[data-v-0a9a3acc]{padding-top:.53333rem;padding-bottom:.8rem;min-height:calc(100vh - .8rem);display:flex;flex-direction:column}\n",document.head.appendChild(a);const L=e=>(S("data-v-0a9a3acc"),e=e(),V(),e),M={class:"page-container"},O={class:"page-content"},X={class:"text-center text-24px"},P={class:"text-center color-#999 mt-6px mb-20px"},Q={class:"flex items-stretch flex-wrap ml--5px mr--5px"},Y=["onClick"],Z={class:"text-14px m-3px"},ee=["disabled","onClick"],ae={class:"flex items-center justify-between w-100% pl-5px pr-5px mb-5px"},te={class:"text-12px color-#999"},ne={key:1,class:"text-10px color-#333"},le={class:"text-12px color-#999 pt-5px w-100% border-t-1px mt-10px"},oe=["disabled","onClick"],ce={class:"flex items-center justify-between w-100% pl-5px pr-5px mb-5px"},se={class:"text-12px color-#999"},re={key:1,class:"text-10px color-#333"},ie={class:"text-12px color-#999 pt-5px w-100% border-t-1px mt-10px"},pe={class:"flex justify-center color-#3F80F7 text-12px mt-5px"},de=["onClick"],me={class:"mr-2px"},ue=["onClick"],xe={class:"mr-2px"},fe={class:"mb-5px mt-20px"},be=L((()=>d("div",{class:"mb-5px mt-20px"},"Fee Rate",-1))),ve=L((()=>d("div",{class:"flex-1"},null,-1))),ge={key:0,class:"text-12px color-#999 flex items-center justify-center mt-10px"},ye={class:"mr-2px"},he=["onClick"],ke={key:1,class:"flex items-center justify-between text-12px mt-10px"},we={class:"color-#999"},Fe={class:"color-#333"},Be={class:"flex items-center justify-between text-12px mt-10px"},$e={class:"color-#999"},Ce=L((()=>d("span",{class:"flex-1"},null,-1))),_e={class:"color-#333"},je={class:"text-14px color-#333 flex flex-col items-center pt-30px pb-30px pl-16px pr-16px"},Te={class:"mt-10px text-15px font-500"},Ie={class:"mt-10px text-12px color-#999"},Ee={class:"mt-10px text-14px color-#999 flex items-center justify-between w-100% mb-20px"},ze={class:"text-14px color-#333 flex flex-col items-center pt-30px pb-30px pl-16px pr-16px"},Ue={class:"mt-10px text-15px font-500"},Ae={class:"mt-10px text-14px color-#999 flex items-center justify-between w-100% mb-20px"};e("default",H(t({__name:"transfer",setup(e){const a=n(),{t:t}=l(),S=o();let V=c(""),H=c(S.query.tick||""),L=c(S.query.toAddress||""),Re=c({}),Ne=null;function Se(){H.value&&q(H.value).then((e=>{console.log(e),Re.value=e,Ne&&(clearTimeout(Ne),Ne=null),Ne=setTimeout((()=>{Se()}),3e5)}))}let Ve=c(""),qe=c(!1),De=c(!1),He=c(5);function We(){De.value=!De.value}let Ge=s((()=>a?.brc20Balance?.transferableInscriptions||[])),Je=s((()=>(Ge.value||[]).find((e=>Ve.value===e.inscriptionId))));r(H,(e=>{4===e.length&&(Ve.value="",Le(),Se())}),{immediate:!0});let Ke=null;function Le(){H.value&&4===H.value.length&&(a.walletAddress?a.getBrc20Balance(H.value).then((e=>{Ke&&(clearTimeout(Ke),Ke=null),Ke=setTimeout((()=>{Le()}),12e4)})):setTimeout((()=>{Le()}),3e3))}let Me=c(!1),Oe=c("");function Xe(){a.checkWallet()&&a?.provider?.inscribeTransfer(H.value).then((e=>{console.log(e),"string"==typeof e?(Oe.value=e,Me.value=!0):z({message:t("transferSubmitted"),type:"success"}),setTimeout((()=>{Le()}),2e3)})).catch((e=>{console.log(e),g(e)}))}let Pe=c(!1),Qe=c("");function Ye(){a.checkWallet()&&L.value&&(qe.value=!0,a?.provider?.sendInscription(L.value,Ve.value,{feeRate:Number(V.value||a.fees.hourFee||void 0)}).then((e=>{console.log(e),e&&(Qe.value=e.txid,b("app_open_tx_detail",{amount:new v(Je.value?.data?.amt||0).toFixed(0),from:a.walletAddress,to:L.value,symbol:Re.value?.token?.symbol||H,transactionHash:e.txid}),Pe.value=!0,setTimeout((()=>{Ve.value="",Le()}),2e3)),qe.value=!1})).catch((e=>{console.log(e),qe.value=!1,g(e)})))}function Ze(e){(e||Qe.value)&&U(`https://mempool.space/tx/${e||Qe.value}`)}function ea(){a.getFees().then((e=>{V.value=a.fees.halfHourFee||""}))}return i((()=>{ea()})),(e,t)=>{const n=A,l=J,o=K,c=R,s=D,r=N,i=y,b=W;return h(),p("div",M,[d("div",O,[m(i,{class:"form-container text-14px color-#333 font-400",onSubmit:Ye},{default:u((()=>[d("div",X,k(x(Je)?.data?.amt||0)+" "+k(x(Re)?.token?.symbol||x(H)),1),d("div",P,k(e.$t("transferableBalance"))+": "+k(x(a).brc20Balance.transferableBalance)+" "+k(x(H)),1),m(o,{class:"radio-group mb-10px",modelValue:x(Ve),"onUpdate:modelValue":t[0]||(t[0]=e=>f(Ve)?Ve.value=e:Ve=e)},{default:u((()=>[d("div",Q,[d("button",{class:"flex flex-wrap items-center justify-center radio-btn clickable p-5px color-#999 min-h-80px important-p-5px",style:w({"min-width":0===(x(Ge)||[]).length?"calc(99% - 8px)":""}),type:"button",onClick:F(Xe,["stop"])},[m(n,{name:"plus",size:"1.5em"}),d("span",Z,k(e.$t("inscribeTransfer")),1)],12,Y),(h(!0),p(B,null,$((x(Ge)||[]).slice(0,x(He)),((a,t)=>(h(),p("button",{class:"flex flex-col items-center radio-btn",type:"button",disabled:a.confirmations<3,key:t,onClick:F((e=>f(Ve)?Ve.value=a.inscriptionId:Ve=a.inscriptionId),["stop"])},[d("div",ae,[d("span",te,k(x(Re)?.token?.symbol||x(H)),1),a.confirmations>=3?(h(),C(l,{key:0,disabled:a.confirmations<3,name:a.inscriptionId},null,8,["disabled","name"])):(h(),p("span",ne,k(e.$t("unconfirmed")),1))]),d("span",null,k(x(_)(a.data.amt)),1),d("span",le,k(`#${a.inscriptionNumber}`),1)],8,ee)))),128)),(h(!0),p(B,null,$((x(Ge)||[]).slice(x(He)),((a,t)=>j((h(),p("button",{class:"flex flex-col items-center radio-btn",type:"button",disabled:a.confirmations<3,key:t,onClick:F((e=>f(Ve)?Ve.value=a.inscriptionId:Ve=a.inscriptionId),["stop"])},[d("div",ce,[d("span",se,k(x(Re)?.token?.symbol||x(H)),1),a.confirmations>=3?(h(),C(l,{key:0,disabled:a.confirmations<3,name:a.inscriptionId},null,8,["disabled","name"])):(h(),p("span",re,k(e.$t("unconfirmed")),1))]),d("span",null,k(x(_)(a.data.amt)),1),d("span",ie,k(`#${a.inscriptionNumber}`),1)],8,oe)),[[T,x(De)]]))),128))]),j(d("div",pe,[j(d("button",{class:"flex items-center",onClick:F(We,["stop"]),type:"button"},[d("span",me,k(e.$t("expandMore")),1),I(),m(n,{name:"arrow-down"})],8,de),[[T,!x(De)]]),j(d("button",{class:"flex items-center",onClick:F(We,["stop"]),type:"button"},[d("span",xe,k(e.$t("fold")),1),I(),m(n,{name:"arrow-up"})],8,ue),[[T,x(De)]])],512),[[T,(x(Ge)||[]).length>x(He)]])])),_:1},8,["modelValue"]),d("div",fe,k(e.$t("receiptAddress")),1),m(c,{class:"input-box",name:"toAddress",modelValue:x(L),"onUpdate:modelValue":t[1]||(t[1]=e=>f(L)?L.value=e:L=e),placeholder:e.$t("receiptAddress"),clearable:"",border:!1,rules:[{required:!0,message:e.$t("cannotBeEmpty")}]},null,8,["modelValue","placeholder","rules"]),be,m(G,{feeRate:x(V),"onUpdate:feeRate":t[2]||(t[2]=e=>f(V)?V.value=e:V=e)},null,8,["feeRate"]),ve,0===Number(x(a).brc20Balance.transferableBalance)?(h(),p("div",ge,[d("span",ye,k(e.$t("transferTips")),1),d("button",{class:"color-#3F80F7 clickable",type:"button",onClick:F(Xe,["stop"])},k(e.$t("inscribeTransfer1")),9,he)])):(h(),p("div",ke,[d("span",we,k(e.$t("availableBalance")),1),d("span",Fe,k(x(a).brc20Balance.availableBalanceSafe)+" "+k(x(H)),1)])),j(d("div",Be,[d("span",$e,k(e.$t("unsafeBalance")),1),Ce,d("span",_e,k(x(a).brc20Balance.transferableBalanceUnconfirmed)+" "+k(x(H)),1),0!==Number(x(a).brc20Balance.transferableBalanceUnconfirmed)?(h(),C(s,{key:0,class:"ml-5px",size:"0.4rem",color:"#3F80F7"})):E("",!0)],512),[[T,Number(x(a).brc20Balance.transferableBalanceUnconfirmed)>0]]),m(r,{class:"submit-btn important-mt-20px",block:"",type:"primary","native-type":"submit",loading:x(qe),disabled:!x(Ve)||!x(Je)||!x(L),"loading-text":e.$t("confirm")},{default:u((()=>[I(k(e.$t("confirm")),1)])),_:1},8,["loading","disabled","loading-text"])])),_:1})]),m(b,{show:x(Pe),"onUpdate:show":t[5]||(t[5]=e=>f(Pe)?Pe.value=e:Pe=e),title:" "},{default:u((()=>[d("div",je,[m(n,{size:"3.4em",color:"#12B886",name:"checked"}),d("div",Te,k(e.$t("success")),1),d("div",Ie,k(e.$t("transferSubmitted")),1),d("div",Ee,[d("span",null,k(e.$t("txId")),1),d("button",{class:"color-#558BED clickable",onClick:t[3]||(t[3]=F((e=>Ze(x(Qe))),["stop"]))},k(x(Qe)?x(Qe)?.slice?.(0,5)+"..."+x(Qe)?.slice?.(-5):""),1)]),m(r,{color:"#3F80F7",block:"",class:"max-h-40px",onClick:t[4]||(t[4]=F((e=>Ze(x(Qe))),["stop"]))},{default:u((()=>[I(k(e.$t("viewTx")),1)])),_:1})])])),_:1},8,["show"]),m(b,{show:x(Me),"onUpdate:show":t[8]||(t[8]=e=>f(Me)?Me.value=e:Me=e),title:" "},{default:u((()=>[d("div",ze,[m(n,{size:"3.4em",color:"#12B886",name:"checked"}),d("div",Ue,k(e.$t("inscribeTransferSubmitted1")),1),d("div",Ae,[d("span",null,k(e.$t("txId")),1),d("button",{class:"color-#558BED clickable",onClick:t[6]||(t[6]=F((e=>Ze(x(Oe))),["stop"]))},k(x(Oe)?x(Oe)?.slice?.(0,5)+"..."+x(Oe)?.slice?.(-5):""),1)]),m(r,{color:"#3F80F7",block:"",class:"max-h-40px",onClick:t[7]||(t[7]=F((e=>Ze(x(Oe))),["stop"]))},{default:u((()=>[I(k(e.$t("viewTx")),1)])),_:1})])])),_:1},8,["show"])])}}}),[["__scopeId","data-v-0a9a3acc"]]))}}}));
